-- Create a library object for the UI
local WacksHub = {}
WacksHub.__index = WacksHub

-- Function to create a new window
function WacksHub:Window(title)
    local window = {}
    setmetatable(window, self)

    window.Frame = Instance.new("Frame")
    window.Frame.Size = UDim2.new(0, 400, 0, 300)
    window.Frame.Position = UDim2.new(0.5, -200, 0.5, -150)
    window.Frame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    window.Frame.AnchorPoint = Vector2.new(0.5, 0.5)
    window.Frame.Parent = game.Players.LocalPlayer.PlayerGui

    -- Title
    window.Title = Instance.new("TextLabel")
    window.Title.Size = UDim2.new(1, 0, 0, 50)
    window.Title.BackgroundTransparency = 1
    window.Title.Text = title
    window.Title.TextColor3 = Color3.fromRGB(255, 255, 255)
    window.Title.TextSize = 24
    window.Title.Parent = window.Frame

    -- Components container
    window.Components = {}

    -- Function to add a button
    function window:Button(label, callback)
        local button = Instance.new("TextButton")
        button.Size = UDim2.new(0, 200, 0, 50)
        button.Position = UDim2.new(0.5, -100, 0, 50 + (#window.Components * 60))
        button.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
        button.Text = label
        button.TextColor3 = Color3.fromRGB(255, 255, 255)
        button.TextSize = 20
        button.Parent = window.Frame

        -- Button click event
        button.MouseButton1Click:Connect(function()
            callback()
        end)

        table.insert(window.Components, button)
    end

    -- Function to add a toggle
    function window:Toggle(label, defaultState, callback)
        local toggleFrame = Instance.new("Frame")
        toggleFrame.Size = UDim2.new(0, 200, 0, 50)
        toggleFrame.Position = UDim2.new(0.5, -100, 0, 50 + (#window.Components * 60))
        toggleFrame.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
        toggleFrame.Parent = window.Frame

        local toggleLabel = Instance.new("TextLabel")
        toggleLabel.Size = UDim2.new(0.7, 0, 1, 0)
        toggleLabel.BackgroundTransparency = 1
        toggleLabel.Text = label
        toggleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
        toggleLabel.TextSize = 20
        toggleLabel.Parent = toggleFrame

        local toggleButton = Instance.new("TextButton")
        toggleButton.Size = UDim2.new(0, 30, 0, 30)
        toggleButton.Position = UDim2.new(0.8, 0, 0.5, -15)
        toggleButton.BackgroundColor3 = defaultState and Color3.fromRGB(0, 255, 0) or Color3.fromRGB(255, 0, 0)
        toggleButton.Text = ""
        toggleButton.Parent = toggleFrame

        toggleButton.MouseButton1Click:Connect(function()
            defaultState = not defaultState
            toggleButton.BackgroundColor3 = defaultState and Color3.fromRGB(0, 255, 0) or Color3.fromRGB(255, 0, 0)
            callback(defaultState)
        end)

        table.insert(window.Components, toggleFrame)
    end

    -- Function to add a slider
    function window:Slider(label, min, max, default, callback)
        local sliderFrame = Instance.new("Frame")
        sliderFrame.Size = UDim2.new(0, 200, 0, 50)
        sliderFrame.Position = UDim2.new(0.5, -100, 0, 50 + (#window.Components * 60))
        sliderFrame.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
        sliderFrame.Parent = window.Frame

        local sliderLabel = Instance.new("TextLabel")
        sliderLabel.Size = UDim2.new(0.7, 0, 1, 0)
        sliderLabel.BackgroundTransparency = 1
        sliderLabel.Text = label
        sliderLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
        sliderLabel.TextSize = 20
        sliderLabel.Parent = sliderFrame

        local sliderButton = Instance.new("TextButton")
        sliderButton.Size = UDim2.new(0, 30, 0, 30)
        sliderButton.Position = UDim2.new(0.8, 0, 0.5, -15)
        sliderButton.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
        sliderButton.Text = ""
        sliderButton.Parent = sliderFrame

        local minValue = min
        local maxValue = max

        sliderButton.MouseButton1Down:Connect(function()
            local mouse = game.Players.LocalPlayer:GetMouse()
            local startX = sliderButton.Position.X.Offset
            local startPos = mouse.X

            game:GetService("UserInputService").InputChanged:Connect(function(input)
                if input.UserInputType == Enum.UserInputType.MouseMovement then
                    local delta = input.Position.X - startPos
                    local newPos = math.clamp(startX + delta, 0, 200)
                    sliderButton.Position = UDim2.new(0, newPos, 0.5, -15)
                    local value = math.floor((newPos / 200) * (maxValue - minValue) + minValue)
                    callback(value)
                end
            end)
        end)

        table.insert(window.Components, sliderFrame)
    end

    return window
end

return WacksHub
